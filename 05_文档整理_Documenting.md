# 📑 文档整理与排版法则 (Documenting Rules)

`[实体: 系统规范, 排版标准]`
`[关联: 文档美化, Mermaid, Notion兼容性]`
`[状态: 活跃]`
`[更新日期: YYYY-MM-DD]`

---

## 📌 【触发条件】 (chunk: < 400 tokens)
*本法则**仅在**执行"文档整理"、"日记重构"、"知识库提纯落盘"时严格触发。*
*在日常高频的"对话任务"、"编码任务"中，为了降低 Token 损耗并保持对话流轻快，**静默豁免**本法则。*

---

## 🎨 核心排版策略 (Formatting Strategy)
在撰写正式的 MD 归档文档时，AI 助手将严格遵循以下美学与信息承载度极高的结构化要求：

1. **信息颗粒度极限放大**：
   - 必须毫无遗漏地捕捉关键点与所有细节信息。
   - 对所涉及的知识和逻辑进行深层剖析（What / Why / How）。
   - 将"处理事物的方式方法"（SOP）全面归纳总结。
2. **多维结构切割**：
   - 拒接长篇大论。文本强制采用：**分类 (Categories)**、**分部 (Sections)**、**分节点 (Nodes)** 的嵌套呈现。
   - 大量运用 Emoji 表情符号 (🚀💡⚠️📌 等) 来增强区块的辨识度。

---

## 📊 图表与可视树 (Mermaid & Visuals)
如果逻辑过于庞大，强制输出 **Mermaid 流程树/关系图**：

1. **图形多样性**：必须混合使用矩形 `[]`、圆角矩形 `()`、圆形 `(())`、菱形 `{}` 等，以区分节点属性。
2. **鲜明的高辨识度配色**：
   - 在 Mermaid 内部，必须大规模应用 `classDef` 和 `style` 来定义高饱和度的背景色 (fill) 和边框色 (stroke)。
   - **换行符铁律**：在 Mermaid 节点文本中进行换行时，**绝对禁止使用 `\n`**，必须且只能使用 HTML 换行符 `<br>`。
   - 允许在 Mermaid 标签内嵌入 Emoji 图标。

---

## ⛔ Notion 兼容性避坑铁律 (Notion Compatibility Strict Rules)
考虑到日后可能将 Markdown 粘贴进 Notion 等不支持完整 HTML 的富文本容器，**在纯文本域 (Normal Text Field)** 必须恪守以下雷区：

1. **禁止使用 HTML 前景色/背景色** (如 `<span style="color:red">`)。只允许使用 Markdown 原生支持的**标题字号 (`#`)**、**加粗 (`** **`)** 和 **斜体 (`* *`)**。
2. **禁止使用 HTML 换行符 `<br>`**。在非 Mermaid 的基础文本中需要换行，请直接老老实实回车 (Press Enter)。
3. 但是，**可以且应该**在段首和文字中间大量配以 **原生 Emoji 表情符号**（这是 Notion 原生完美支持且能大幅度提亮文本色彩的最佳方案）。
